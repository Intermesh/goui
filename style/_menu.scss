$menuWidth: dp(160);

menu.dropdown {
	@extend .z12;

	display: block;
	z-index: $zIndexMenu;
	list-style: none;
	position: fixed;
	min-width: $menuWidth;
	border: 2px solid $colorBorderWindow;
	border-radius: dp(8);
	background-color: $colorBackgroundDarker;//rgba(232,232,232,0.95);
	backdrop-filter: blur(5px);
	-webkit-backdrop-filter: blur(5px);

	margin-block-start: 0;
	margin-block-end: 0;
	margin-inline-start: 0;
	margin-inline-end: 0;
	padding-inline-start: 0;
	padding: dp(12);

	li {
		display:block;
		padding: 0;
		margin: 0;

		> button {

			border: 0;
			width: 100%;
			text-align: start;
			//padding: 2px dp(8);

			&:hover {
				color: $colorText;
				background-color: $colorHover;
			}

		}

		.form-field {
			.hint {
				height: 0;
				padding: 0;
			}
		}

		label.form-field.checkbox {
			margin-bottom: 0;
			.control {
				.box-label {
					color: inherit;
				}
			}
			&:hover {
				background-color: $colorHover;
				color: $colorText;

				input:not(:checked) {
					border-color: white;
				}
			}
			border-radius: dp(12);
			padding: 4px dp(16);
		}

		hr {
			margin: dp(12) dp(12); //same as button
		}
	}

	button & {
		color: $colorText;
	}

	// First menu is always visible. button must be clicked to toggle hidden attribute.
	button > menu.dropdown {
		position: absolute;
		&:not(:hover) {
			//https://easings.net/#easeInCubic
			transition: all 200ms cubic-bezier(0.32, 0, 0.67, 0);;
		}
		visibility:hidden;
		opacity: 0;
		top: 0;
		left: 100%;
	}

	&.expand-left {

		button > menu.dropdown {
			left: -100%;
			transform: translateX(dp(-24));
		}

	}

	//second expands on hover
	button:hover > menu.dropdown, button:focus-within > menu {
		transition: 0s;
		visibility: visible;
		opacity: 1;
	}



}

button.button.with-text.has-menu {
	padding-right: dp(36);

	&:after {
		position: absolute;
		top: dp(12);
		right: dp(8);
		@extend %icon;
		margin-right: 0;
		content: "expand_more";
		.menu & {
			content: "chevron_right";
		}
	}
}


menu.dropdown.menu-color {
	display:flex;
	flex-direction: row;
	flex-wrap: wrap;
	align-items: center;
	justify-content: center;
	min-width: 5 * dp(38) + dp(28);
	width: 5 * dp(38) + dp(28);

	li {
		&:first-child {
			button {
				// "Auto" button
				width: 5 * dp(38);
				text-align: center;
				margin-bottom: dp(12);
			}
		}
		button {
			text-align: center;
			div {
				//color dot
				display: inline-block;
				width: dp(16);
				height: dp(16);
				border-radius: 50%;
				border: 2px solid $colorBorder;
			}
		}

	}
}